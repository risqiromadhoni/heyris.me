---
import { Image } from "astro:assets";
import aboutImg from "@/assets/risqiromadhoni.png";
import PageLayout from "@/layouts/Base.astro";
import { Icon } from "astro-icon/components";
import { socialLinks, workingExperiences } from "../constant";

const meta = {
	description: "I'm a starter theme for Astro.build",
	title: "About",
};
const githubLink = socialLinks.find((link) => link.name.includes("github"));
---

<PageLayout meta={meta}>
	<section aria-label="About" class="space-y-6">
		<h1 class="title">About Me ğŸ™</h1>
		<p>
			Hi, Iâ€™m a software engineer with over 7 years of experience. Loving gardening in hydroponics
			ğŸª´ and aquaponics ğŸª· when I'm not coding ğŸ§‘ğŸ»â€ğŸ’».
		</p>
		<a
			href={githubLink?.link}
			rel={`noreferrer ${githubLink?.isWebmention ? "me authn" : ""}`}
			target="_blank"
			aria-label="GitHub"
			title="Risqi Romadhoni"
			class="mx-auto flex w-1/2 justify-center object-cover grayscale hover:filter-none"
		>
			<Image
				alt="Risqi Romadhoni"
				fetchpriority="high"
				loading="eager"
				src={aboutImg}
				class="rounded-xl"
			/>
		</a>
	</section>
	<section aria-label="Leanguages" class="mt-16">
		<h2 class="title mb-4 text-xl">Leanguages</h2>
		<ul class="max-w-full">
			<li class="grid gap-2 sm:grid-cols-[auto_1fr] sm:[&_q]:col-start-2">
				<p class="min-w-32 text-accent-2">Indonesia</p>
				<p>Native proficiency (oral and written)</p>
			</li>
			<li class="grid gap-2 sm:grid-cols-[auto_1fr] sm:[&_q]:col-start-2">
				<p class="min-w-32 text-accent-2">English</p>
				<p>Profesional proficiency (oral and written)</p>
			</li>
		</ul>
	</section>
	<section id="working-experiences" aria-label="Working Experiences" class="mt-16">
		<h2 class="title mb-6 text-xl">Working Experiences</h2>
		<div class="space-y-4" role="listbox">
			<ul class="flex w-full flex-col" role="list">
				{
					workingExperiences.map((workingExperience) => (
						<li data-testid={workingExperience.companyName} role="listitem" class="group">
							<article class="relative flex flex-col gap-2">
								<span class="absolute left-0 grid justify-center bg-transparent transition-opacity duration-200">
									<span class="bg-blue-gray-100 h-full w-0.5" />
								</span>
								<a
									href={workingExperience.companyUrl}
									target="_blank"
									rel="noopener noreferrer"
									class="flex items-center gap-4"
									title={workingExperience.companyUrl}
								>
									<span class="relative z-[2] w-max flex-shrink-0 overflow-hidden rounded-full bg-bgColor p-0 text-white transition-all duration-200 group-hover:border-2 group-hover:border-accent">
										<Image
											src={workingExperience.companyLogo}
											fetchpriority="auto"
											loading="lazy"
											alt={workingExperience.companyName}
											data-label={workingExperience.companyName}
											class="relative inline-block h-9 w-9 !rounded-full border-2 border-bgColor object-cover object-center"
										/>
									</span>
									<div>
										<h5 class="title text-base">{workingExperience.companyName}</h5>
										<ul class="flex flex-wrap gap-2">
											<li class="flex items-center gap-1">
												<Icon name="mdi:calendar-blank-outline" class="h-4 w-4 text-accent" />
												{workingExperience.startDate} - {workingExperience.endDate}
											</li>
											<li class="flex items-center gap-1">
												<Icon name="mdi:location-outline" class="h-4 w-4 text-accent" />
												{workingExperience.companyLocation}
											</li>
											<li class="flex items-center gap-1">
												<Icon name="mdi:building" class="h-4 w-4 text-accent" />
												{workingExperience.workingCategory}
											</li>
											<li class="flex items-center gap-1">
												<Icon name="mdi:file-document-outline" class="h-4 w-4 text-accent" />
												{workingExperience.jobContract}
											</li>
										</ul>
									</div>
								</a>
								<div class="flex gap-4 pb-8">
									<span class="pointer-events-none invisible h-full flex-shrink-0" />
									<div>
										<input type="radio" class="peer hidden" id={workingExperience.id} />
										<p class="line-clamp-3 text-balance antialiased peer-checked:line-clamp-none">
											{workingExperience.description}
										</p>
										<label
											class="text-accent peer-checked:hidden"
											for={workingExperience.id}
											role="button"
										>
											Read more
										</label>
									</div>
								</div>
							</article>
						</li>
					))
				}
			</ul>
		</div>
	</section>
</PageLayout>
